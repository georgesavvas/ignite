cmake_minimum_required( VERSION 3.6 )

project( IgniteResolver )

list ( APPEND CMAKE_PREFIX_PATH "C:/Program Files/Side Effects Software/Houdini 19.0.587/toolkit/cmake" )
find_package( Houdini REQUIRED )

if(WIN32)
    find_package(Boost REQUIRED)
endif(WIN32)

set( library_name ignResolver )
add_library( ${library_name} SHARED
    ignResolver.cpp
    ignResolver.h
)

target_link_libraries( ${library_name} "C:/Program Files/Side Effects Software/Houdini 19.0.587/python37/libs/python37.lib" Houdini)
target_include_directories( ${library_name} PUBLIC
							"C:/Program Files/Side Effects Software/Houdini 19.0.587/python37/include"
                           "${PROJECT_SOURCE_DIR}/include"
                           )

link_directories(
	$ENV{HOUDINI_ROOT}/dsolib}
	$ENV{TBB_LIBRARIES}
)

include_directories(
	${TURRET_INCLUDES}
	${PC_LIBZMQ_INCLUDE_DIRS}
	${CPPZMQ_INCLUDE_DIRS}
	${PYTHON_INCLUDE_DIRS}
	)

if(WIN32)
    link_directories($ENV{PYTHON_LIBS})
    link_libraries(wsock32.lib
        ws2_32.lib
        Iphlpapi.lib
        )
endif(WIN32)

# Configure several common target properties, such as its output directory.
houdini_configure_target( ${library_name} )

pxr_plugin(${PXR_PACKAGE}
    LIBRARIES
        ${TURRET_USD_LIBS}
        ${Boost_PYTHON_LIBRARY}
        ${TURRET_LIBRARY}

    INCLUDE_DIRS
        ${TURRET_USD_INC_DIR}
        $ENV{TBB_INCLUDE_DIR}
        ${Boost_INCLUDE_DIRS}

    PUBLIC_HEADERS
        ignResolver.h

    CPPFILES
        ignResolver.cpp
)